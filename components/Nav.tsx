"use client"

import Link from "next/link"
import { usePathname } from "next/navigation"
import { cn } from "@/lib/utils"
import { BiSolidHome } from "react-icons/bi"
import LinkArrow from "./LinkArrow"

type Category = { name?: string; items: { name: string; href: string; icon: JSX.Element; type?: "external" }[] }

export default function Nav() {
  const pathname = usePathname()

  const iconStyle = "w-[.875rem] h-[.875rem]"

  const categories: Category[] = [
    {
      items: [
        {
          name: "Home",
          href: "/",
          icon: <BiSolidHome />,
        },
      ],
    },
    {
      name: "Projects",
      items: [
        {
          name: "FEFU Open Day",
          href: "https://dod.dvfu.ru",
          icon: (
            <svg
              className={iconStyle}
              width="193"
              height="193"
              viewBox="0 0 193 193"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M104.369 42.7867L111.34 46.6526C112.022 47.0316 112.693 47.4106 113.394 47.7668C113.506 47.8149 113.627 47.8365 113.747 47.8299C113.868 47.8233 113.986 47.7888 114.092 47.7289C116.169 45.7808 118.302 43.8858 119.536 41.2025C120.211 39.7074 120.363 38.0247 119.967 36.4307C121.607 37.0991 123.075 38.1359 124.26 39.4628C127.417 42.8208 128.76 46.861 128.509 51.4356C128.43 52.7697 127.972 54.0887 127.594 55.3887C127.462 55.8283 127.485 55.9837 127.852 56.2642C131.846 59.3266 135.378 62.8362 137.939 67.2554C139.896 70.625 141.313 74.21 141.632 78.125C141.936 81.008 142.043 83.907 141.954 86.805C141.801 89.723 141.167 92.615 140.743 95.522C140.743 95.643 140.743 95.764 140.713 96.056C140.286 94.889 139.944 93.865 139.543 92.869C137.162 86.968 132.963 82.635 127.687 79.391C123.96 77.091 120.031 75.127 116.192 73.016C115.374 72.569 114.56 72.11 113.713 71.731C113.563 71.671 113.401 71.644 113.239 71.653C113.077 71.661 112.919 71.705 112.776 71.781C109.337 74.32 105.922 76.894 102.502 79.459C102.318 79.6 102.127 79.751 101.872 79.975C104.797 81.79 107.628 83.606 110.496 85.326C115.854 88.525 121.328 91.535 126.596 94.877C133.249 98.973 138.178 105.4 140.443 112.933C141.111 115.105 141.369 117.425 141.643 119.695C141.929 121.747 142.054 123.819 142.018 125.892C141.909 129.242 141.594 132.585 141.321 135.928C141.182 137.614 140.946 139.297 140.754 140.984C140.754 141.059 140.668 141.128 140.627 141.188C140.004 139.32 139.502 137.421 138.752 135.617C136.97 131.376 134.257 127.601 130.818 124.576C126.795 120.961 122.052 118.558 117.35 116.068C107.032 110.61 96.747 105.099 87.141 98.402C84.943 96.886 82.787 95.279 80.496 93.634L69.1313 101.809C70.53 103.113 71.719 104.322 73.012 105.406C77.293 108.976 81.885 112.148 86.732 114.881C91.295 117.481 95.933 119.941 100.522 122.492C107.005 126.092 113.522 129.632 119.926 133.366C124.121 135.859 127.9 139.007 131.122 142.693C135.621 147.76 139.108 153.461 140.608 160.195C141.122 162.495 141.459 164.832 141.617 167.184C141.868 171.027 142.014 174.882 141.992 178.733C141.962 181.522 141.583 184.312 141.317 187.101C141.171 188.659 140.942 190.213 140.728 191.987C140.079 190.243 139.551 188.685 138.928 187.166C136.964 182.213 134.274 177.586 130.949 173.442C129.009 171.057 126.943 168.779 124.759 166.62C121.429 163.364 117.669 160.591 113.586 158.38C106.18 154.34 98.67 150.504 91.22 146.555C84.298 142.886 77.448 139.089 71.01 134.582C66.9604 131.751 63.0759 128.708 59.6939 125.073C56.0794 121.215 53.0798 116.932 51.7112 111.664C50.4214 106.737 50.9613 101.942 52.7648 97.239C53.9212 94.179 55.5141 91.308 57.4929 88.715C58.8353 86.96 60.4925 85.433 62.0935 83.898C63.4696 82.579 64.9806 81.404 66.3905 80.108C66.5292 79.982 66.4767 79.44 66.3267 79.221C64.257 76.136 62.401 72.94 61.3137 69.3665C59.6901 64.03 60.4325 58.9665 63.0984 54.1342C65.0256 50.6321 67.8115 47.9184 70.864 45.4473L73.65 43.1733C72.622 41.7747 71.445 40.4596 70.587 38.9587C67.6615 33.8459 67.7665 28.6422 70.459 23.4573C72.161 20.1827 74.958 17.9958 77.999 16.1804C81.914 13.8419 85.967 11.7422 89.941 9.50609C91.213 8.83139 92.43 8.05449 93.578 7.18279C95.172 5.90929 96.203 4.26439 95.941 1.99799C98.745 2.83939 100.234 4.87079 101.032 7.43289C102.033 10.6507 101.359 13.5311 98.963 15.9644C94.291 20.702 88.854 24.3707 83.076 27.5241L82.232 27.9789C83.927 29.3319 85.536 30.6319 87.159 31.9092C87.654 32.2882 88.239 32.5838 88.689 33.0197C89.285 33.592 89.795 33.5541 90.489 33.1637C94.366 30.9958 98.303 28.9302 101.838 26.1938C103.691 24.7611 105.472 23.2224 106.154 20.8536C106.409 19.9705 106.345 18.9926 106.45 17.8215C107.594 18.4886 108.76 19.0192 109.754 19.781C112.495 21.8958 114.028 24.7346 113.964 28.2404C113.912 31.0981 112.693 33.5465 110.796 35.6538L104.369 42.7867ZM84.298 67.46L95.074 60.7289C92.307 58.7012 89.619 56.7379 86.938 54.7671C86.778 54.6149 86.57 54.5243 86.351 54.5111C86.132 54.498 85.915 54.5631 85.738 54.6951C83.612 55.9913 81.449 57.2231 79.3 58.4852C78.34 59.0499 77.384 59.6222 76.256 60.3082L84.298 67.46Z"
                fill="currentColor"
              />
            </svg>
          ),
          type: "external",
        },
        {
          name: "KANCOO",
          href: "https://kancoo.tech",
          icon: <div className={`${iconStyle} rounded-full bg-[currentColor]`} />,
          type: "external",
        },
      ],
    },
    {
      name: "Online",
      items: [
        {
          name: "Twitter",
          href: "https://twitter.com/mazhugasergei",
          icon: (
            <svg className={iconStyle} viewBox="0 0 248 204">
              <path
                fill="currentColor"
                d="M221.95 51.29c.15 2.17.15 4.34.15 6.53 0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z"
              />
            </svg>
          ),
          type: "external",
        },
        {
          name: "GitHub",
          href: "https://github.com/mazhugasergei",
          icon: (
            <svg
              className={iconStyle}
              width="193"
              height="193"
              viewBox="0 0 1024 1024"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"
                transform="scale(64)"
                fill="currentColor"
              />
            </svg>
          ),
          type: "external",
        },
        {
          name: "Telegram",
          href: "https://t.me/mazhugasergei",
          icon: (
            <svg className={iconStyle} width="193" height="193" viewBox="0 0 512 512">
              <path
                d="M477,43.86,13.32,223.29a5.86,5.86,0,0,0-.8.38c-3.76,2.13-30,18.18,7,32.57l.38.14,110.41,35.67a6.08,6.08,0,0,0,5.09-.62L409.25,120.57a6,6,0,0,1,2.2-.83c3.81-.63,14.78-1.81,7.84,7-7.85,10-194.9,177.62-215.66,196.21a6.3,6.3,0,0,0-2.07,4.17l-9.06,108a7.08,7.08,0,0,0,2.83,5.67,6.88,6.88,0,0,0,8.17-.62l65.6-58.63a6.09,6.09,0,0,1,7.63-.39l114.45,83.1.37.25c2.77,1.71,32.69,19.12,41.33-19.76l79-375.65c.11-1.19,1.18-14.27-8.17-22-9.82-8.08-23.72-4-25.81-3.56A6,6,0,0,0,477,43.86Z"
                fill="currentColor"
              />
            </svg>
          ),
          type: "external",
        },
      ],
    },
  ]

  const linkStyle =
    "min-w-[12.4375rem] flex items-center space-x-3 rounded-[.375rem] px-2 py-[.375rem] text-sm font-medium hover:bg-[#E5E5E5] dark:hover:bg-[#404040] transition-colors"

  const headingStyle = "text-xs font-semibold text-gray-1000 text-opacity-40 dark:text-white px-2 pt-5 pb-2"

  return (
    <nav className="p-3">
      {categories.map((category, i) => (
        <div key={`category_${i}`}>
          {category.name && <h4 className={headingStyle}>{category.name}</h4>}
          <ul className="flex flex-col gap-1">
            {category.items.map((item) => (
              <li key={item.name}>
                <Link
                  href={item.href}
                  target={item.type === "external" ? "_blank" : ""}
                  className={cn(
                    linkStyle,
                    pathname === item.href ? "text-white bg-[#050505] hover:bg-[#050505] dark:bg-[#404040]" : ""
                  )}
                >
                  {item.icon}
                  <span className="flex-1">{item.name}</span>
                  {item.type === "external" && <LinkArrow className="opacity-40 dark:opacity-100 pl-3 pr-1" />}
                </Link>
              </li>
            ))}
          </ul>
        </div>
      ))}
    </nav>
  )
}
